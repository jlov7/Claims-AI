[pytest]
python_files = tests.py test_*.py *_tests.py
python_classes = Test
python_functions = test_

# Asyncio mode for pytest-asyncio
asyncio_mode = strict

# Environment variables for tests
# These override any system-level environment variables for the test session.
env =
    D:CHROMA_HOST=localhost # D: is for dotenv values, will be overridden by code if PYTEST_RUNNING detected
    D:CHROMA_PORT=8008
    # Disable LangSmith tracing for tests
    LANGCHAIN_TRACING_V2=false
    LANGCHAIN_API_KEY=
    LANGCHAIN_PROJECT=
    LANGCHAIN_ENDPOINT=

# Add markers if you use custom markers
# markers =
#     slow: marks tests as slow to run
#     serial

# Coverage settings
# coverage_run_include = backend/*
# coverage_report_include = backend/*
# coverage_report_omit = backend/tests/*, backend/core/config.py
# coverage_report_show_missing = True
# coverage_report_fail_under = 80

markers =
    api: marks tests as API tests
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    full_llm_test: marks tests that call the actual LLM
    full_llm_summarise_test: marks summarise tests that call the actual LLM
    asyncio: marks tests as asyncio tests (though usually handled by plugin)
    smoke: mark a test as a smoke test.
    reset_path_mocks_for_test: Mark test to reset fixture-provided Path mocks.

asyncio_default_fixture_loop_scope = function 